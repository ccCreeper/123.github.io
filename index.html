<!DOCTYPE html>
<html>
<head>
    <title>三国重要情节梳理</title>
    <style>
        .timeline-item {
            margin-bottom: 10px;
            cursor: pointer;
        }

        .timeline-content {
            display: inline-block;
            margin-right: 10px;
        }

        .timeline-text {
            display: none;
        }
    </style>
</head>
<body>
    <h1>三国重要情节梳理</h1>
    <div id="timeline"></div>
    <form id="eventForm">
        <label for="date">日期:</label><br>
        <input type="text" id="date" name="date"><br>
        <label for="description">描述:</label><br>
        <input type="text" id="description" name="description"><br>
        <label for="text">文本:</label><br>
        <input type="text" id="text" name="text"><br>
        <input type="submit" value="添加事件">
    </form>
    <script>
        var events = [
            { date: '184年', description: '桃园三结义', text: '汉朝末年，黄士倡乱。幽州太守刘焉发榜招军，榜至涿县，为刘备所见，叹息之余，偶遇屠户张飞，张飞见刘备出生不俗，便约其至村店饮酒，期间又遇因杀恶霸而逃难的关羽，三人志趣相投，次日便于桃园处结义，相约共谋大事。玄德为兄，关羽次之，张飞为弟。' },
            { date: '188年', description: '怒鞭督邮', text: '刘备平定黄巾有功被封为安喜县尉。督邮前来巡查,刘备因没向督邮送钱而遭督邮陷害。张飞得知后气得两眼圆睁，咬碎钢牙，冲进馆驿揪住督邮的头发，扯到县衙前，绑在马桩上，用柳条使劲抽打，一连打断十几根柳条。后为刘备制止，三兄弟弃官投奔刘恢。' },
            { date: '190年', description: '三英战吕布', text: '董卓听说华雄被杀便派吕布驻守虎牢关。袁绍派大军前去攻打，却被吕布连杀数将。张飞冲杀上去，连战五十回合。关羽见张飞不敌,前去助战，厮杀三十回合，仍不敌。刘备见状飞马斜刺过来，三人轮番厮杀使吕布难以招架，便朝刘备虚晃一戟，冲出包围圈，逃回虎牢关。' },
            { date: '192年', description: '王允连环计', text: '董卓为乱朝政。司徒王允先将美貌的义女貂禅许给董卓义子吕布,不久却把她送给董卓。吕布大怒，在凤仪亭与貂禅相会，被董卓发现，貂禅乘机离间董卓和吕布的关系。王允与吕布联合，诱使董卓离开长安，吕布杀死董卓。不久，吕布被迫出走，而王允也被董卓部将杀死。' },
            { date: '193年', description: '三让徐州', text: '刘备使被困的徐州暂缓危机，陶谦欲让徐州，刘备推辞。刘备写信给曹操望其撤兵。因吕布军队威胁，曹操顺水推舟而退兵。陶谦再让徐州，刘备不受。陶谦病重，请来刘备，刘备还是辞让，陶谦以手指心而死。徐州军民表示拥戴浏备，关羽、张飞再三相劝，刘备方同意任徐州牧。' },
            { date: '193年', description: '祢衡击鼓骂曹', text: '曹操欲使人劝说刘表归顺，孔融荐祢衡。曹操见之，不加礼，称相讥，又批斥其人才。曹操恼怒，命其为鼓吏以辱之。祢衡于宴上裸衣击鼓，痛骂操。操不愿负杀戮贤士之名，遂遣之。祢衡在众人的劝说下奔赴荆州。至荆州称又讥讽刘表，刘为免受害贤之名,遣其去见黄祖。祢衡后被黄祖杀死。' },
            { date: '194年', description: '杀吕伯奢', text: '曹操刺董卓不成，从洛阳逃到中牟，被县令陈宫捉住。陈宫义释曹操，与其来到成皋，投宿吕伯奢家中。吕家人磨刀欲杀猪款待，曹操怀疑他们要杀自己，竟将吕家八口杀害，随后路遇出门买酒的吕伯奢，趁其不备，挥剑杀之灭口，并声称"宁教我负天下人，休教天下人负我! "' },
            { date: '198年', description: '吕奉先射戟辕门', text: '袁术派大将纪灵进攻刘备住地小沛，袁送粮请吕按兵不动，刘修书请吕解围，吕知助袁不利已，但碍送粮之面，便在辕门设宴让双方和解。纪灵与张飞斗气，吕大怒，令左右将载树150步辕门外，言若一箭中载小枝，两家罢兵;不中，各自安排厮杀;不从其言者，并力拒之。吕果中，双方罢兵。' },
            { date: '198年', description: '白门楼吕布殒命', text: '操淹下邳，布恃有赤免马，仍沉溺酒色不出战。布部下起离心，盗赤兔马献操，插白旗欲献东门。曹军攻城，布迎敌，少憩门楼之时却被叛将生擒。操在白门楼上处置吕布。布盼刘备相助，并愿辅操定天下。曹问备何如，备以丁原、董卓之事提醒操，气得吕布大骂备无信。操下令将吕布缢死，割首示众。' },
            { date: '199年', description: '曹操煮酒论英雄', text: '刘备寄于曹操篱下，以种菜掩人耳目。一日，曹操请刘备坐饮畅谈。操问天下谁是英雄，刘备答了袁绍等人的名字，操只是摇头。操说"天下英雄，惟使君与操耳”。刘备闻言大为吃惊，匙箸落地。此时雷声大作，刘备借雷声掩饰吃惊，使曹操认为其胆小如鼠，不复怀疑。' },
            { date: '200年', description: '温酒斩华雄', text: '董卓战将华雄连斩诸侯联军二将,袁绍无措,关羽毛遂自荐,因官阶太小,袁术反对。曹操力荐,关羽立下军令状。曹操备热酒一杯，关羽却说待斩了华雄后再饮不迟。众诸侯听得关外喊声大举，不一会，关羽马到中军，提华雄之头，掷于地上。其酒尚温。' },
            { date: '219年', description: '关公约三事', text: '曹操率军征讨刘备，刘备投奔袁绍，关羽被曹操围困在土山之上。操使张辽前往说之。辽具说关公拼死有三罪，降操有三利。关公亦有三约:降汉不降曹;礼待二嫂;一旦得知刘备下落，便当辞去。操从其言。关公告甘、糜二夫人后降操。' },
            { date: '222年', description: '曹操割发代首', text: '曹操征张秀途中，恰逢稻麦成熟，为显示爱民之心，曹操下令要求众将士不准纵马毁麦，否则斩首。没想到禁令刚下，曹操的马受惊跑入麦田，踏毁麦田。此时，曹操招主簿议罪，并假意要自杀以践行军令，后来在众将的劝说下，割发代首以示众人，众军悚然，无不禀尊军令。' },
            { date: '', description: '', text: '' },
        ];

        // 确保文档加载完成后才执行JavaScript代码
        document.addEventListener('DOMContentLoaded', function() {
            var timeline = document.getElementById('timeline');
            for (var i = 0; i < events.length; i++) {
                var event = events[i];
                var item = document.createElement('div');
                item.classList.add('timeline-item');
                var content = document.createElement('div');
                content.classList.add('timeline-content');
                content.textContent = event.date + ': ' + event.description;
                item.appendChild(content);
                var textContent = document.createElement('div');
                textContent.classList.add('timeline-text');
                textContent.textContent = event.text;
                item.appendChild(textContent);
                timeline.appendChild(item);
            }

            // 添加点击事件监听器到每个时间线项
            var timelineItems = document.querySelectorAll('.timeline-item');
            timelineItems.forEach(function(item) {
                item.addEventListener('click', function() {
                    // 切换文本的显示状态
                    var textContent = this.querySelector('.timeline-text');
                    if (textContent) {
                        if (textContent.style.display === 'none') {
                            textContent.style.display = 'block';
                        } else {
                            textContent.style.display = 'none';
                        }
                    } else {
                        alert('您点击了事件，但此事件没有提供详细描述。');
                    }
                });
            });
        });
    </script>
</body>
</html>
